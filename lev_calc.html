<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Leverage Strategy Calculator</title>
  <link rel="icon" type="image/png" href="TradeWithJarslogo.png" />
  <style>
    body {
      background: linear-gradient(to bottom, #0d0d0d, #1a1a1a);
      color: white;
      font-family: 'Trebuchet MS', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .logo {
      max-width: 220px;
      display: block;
      margin: 30px auto 10px;
      animation: flyIn 2s ease-out forwards, pulseUpDown 3s ease-in-out infinite 2s;
    }
    @keyframes flyIn {
      0% { transform: translateY(100px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }
    @keyframes pulseUpDown {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    h1 {
      color: #e02c2c;
    }
    .mode-buttons button {
      background-color: #017a36;
      border: none;
      color: white;
      padding: 10px 15px;
      margin: 5px;
      border-radius: 6px;
      cursor: pointer;
      box-shadow: 0 0 10px #e02c2c;
      transition: background 0.3s;
    }
    .mode-buttons button:hover {
      background-color: #1c7c35;
    }
    .form-group {
      margin: 10px 0;
    }
    input, select {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #444;
      background-color: #1a1a1a;
      color: white;
    }
    #output {
      margin-top: 20px;
      color: #00ff99;
      font-weight: bold;
    }
    footer {
      margin-top: 40px;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <img src="TradeWithJarslogo.png" alt="Trade With Jars Logo" class="logo"/>
  <h1>Leverage Strategy Calculator</h1>
  <div class="mode-buttons">
    <button onclick="switchMode('mode1')">Long Entry</button>
    <button onclick="switchMode('mode2')">Short Entry</button>
    <button onclick="switchMode('mode3')">Risk Calculator</button>
  </div>

  <form id="calcForm">
    <div id="mode1" class="mode-section">
      <div class="form-group">
        <input type="number" name="entry" placeholder="Entry Price" required />
      </div>
      <div class="form-group">
        <input type="number" name="leverage" placeholder="Leverage" required />
      </div>
      <div class="form-group">
        <input type="number" name="stop" placeholder="Stop Loss" required />
      </div>
      <div class="form-group">
        <input type="number" name="size" placeholder="Trade Size ($)" required />
      </div>
    </div>

    <div id="mode2" class="mode-section" style="display:none;">
      <div class="form-group">
        <input type="number" name="entry" placeholder="Entry Price" required />
      </div>
      <div class="form-group">
        <input type="number" name="leverage" placeholder="Leverage" required />
      </div>
      <div class="form-group">
        <input type="number" name="stop" placeholder="Stop Loss" required />
      </div>
      <div class="form-group">
        <input type="number" name="size" placeholder="Trade Size ($)" required />
      </div>
    </div>

    <div id="mode3" class="mode-section" style="display:none;">
      <div class="form-group">
        <input type="number" name="balance" placeholder="Account Balance ($)" required />
      </div>
      <div class="form-group">
        <input type="number" name="risk" placeholder="Risk (%)" required />
      </div>
      <div class="form-group">
        <input type="number" name="entry" placeholder="Entry Price" required />
      </div>
      <div class="form-group">
        <input type="number" name="stop" placeholder="Stop Loss" required />
      </div>
    </div>

    <button type="submit" style="margin-top: 15px; padding: 10px 20px; background-color:#e02c2c; border:none; border-radius:6px; color:white;">Run Strategy</button>
  </form>

  <div id="output"></div>

  <footer>Â© 2025 TradeWithJars.net. All rights reserved.</footer>

  <script>
    function switchMode(modeId) {
      document.querySelectorAll(".mode-section").forEach(el => {
        el.style.display = "none";
      });
      document.getElementById(modeId).style.display = "block";
    }

    document.getElementById("calcForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = new FormData(this);
      const payload = {};
      form.forEach((value, key) => payload[key] = value);

      try {
        const res = await fetch("https://tradewithjars.onrender.com/calculate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        document.getElementById("output").textContent = data.result || "No result returned";
      } catch (err) {
        document.getElementById("output").textContent = "Error calculating. Please try again.";
      }
    });
  </script>
</body>
</html>
